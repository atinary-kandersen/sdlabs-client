# SDLabs v2 web client

## Scripts

- `setup`: Runs all required scripts to run app.
- `dev`: Launches everything needed to develop.
- `build`: Creates a production build in the `dist` folder.
- `preview`: Serves the built solution from the `dist` folder.
- `lint`: Checks all code formatting.
- `format`: Formats all code.
- `json-server`: Launches a `json-server` instance configured with `./dev/json-server.json`.
- `socket-mirror`: Launches a `Socket.IO` web server that mirrots all incoming messages.

###

## Folder and file structure

The app source code is divided into two main folders: **app** and **lib**:

```
src
├── app
├── generated
└── lib
```

- **app** - everything specialized (non-reusable) for the app, such as the main layout (ie. header, footer), pages (discussed below), configuration etc.
- **generated** - Typescript types and schemas etc., generated by scripts.
- **lib** - presentational components and utilities.

A detailed example of the structure:

```
src
├── app
│   ├── config
│   │   ├── api.ts
│   │   ├── environment.ts
│   │   ├── localization.ts
│   │   ├── logging.ts
│   │   └── socket.ts
│   ├── components
│   │   ├── Footer
│   │   └── Header
│   ├── routes
│   │   ├── analytics
│   │   ├── datasets
│   │   ├── experiments
│   │   │   ├── ExperimentsRoute.tsx
│   │   │   └── ExperimentsRoute.module.css
│   │   ├── userProfile
│   │   └── welcome
│   ├── queries
│   │   ├── analytics.ts
│   │   ├── experiments.ts
│   │   ├── datasets.ts
│   │   └── users.ts
│   ├── state
│   │   ├── actions.ts
│   │   ├── useGlobalState.ts
│   │   ├── useUserState.ts
│   │   └── useThemeState.ts
│   ├── App.tsx
│   ├── App.module.css
│   ├── main.tsx
│   ├── index.css
│   ├── Router.tsx
│   generated
│   ├── api.ts
│   └── other.ts
└── lib
    ├── common
    │   ├── components
    │   │   ├── FormatData
    │   │   ├── FormatBytes
    │   │   ├── LearnMore
    │   │   └── Stepper
    │   └── styles
    │       └── commonStyles.module.css
    ├── features
    │   ├── experiments
    │   └── user
    │       ├── UserDetails.ts
    │       ├── UserDetails.module.css
    │       ├── UserList.ts
    │       ├── UserList.module.css
    │       ├── UserListItem.ts
    │       └── UserListItem.module.css
    └── utils
        ├── formatDate.ts
        └── formatNumber.ts
```

## Architectural principles

## CSS

A combinataion of global styles and CSS Modules is used, CSS Modules being how component-specific styles are scoped to its component.

### Layout

We use [Web Awesome's layout style utilities](https://backers.webawesome.com/docs/layout/) for layout.

## Icons

We use [Font Awesome](https://fontawesome.com/icons) for icons and Web Awesome's [`wa-icon`](https://backers.webawesome.com/docs/components/icon/) web component to render icons. The reason is that the `wa-icon` component works well with FontAwsome.

## Ccontainer components and Presentational components

There are two types of components, _container_ components and _presentational_ components.

#### Container components

Presentational components handle tasks such as state, fetching data from APIs and sending and receiving websocket messages. Then they render one or more presentational components, which are fed data via props.

#### Presentational components

Presentational components strictly adhere to React's [unidirectional data flow](https://how.dev/answers/what-is-unidirectional-data-flow-in-react) pattern. They receive all their data via props and communicate to their containing components via callback methods (kind of like emitting events).

**Note**: Presentational components can render other presentational components, but never a container component.
